{{#if this.deviceContext.isDesktop}}
<ul class="atlm-map-ui-project-menu" id="uk-accordion" ...attributes {{did-insert this.initUkAccordion}}>
  <li class="main-menu-toggle uk-text-center uk-text-middle uk-open">
    <div class="uk-margin-remove" uk-grid>
      <a class="uk-accordion-title uk-padding-small atlm-map-menu-button" href="#">
        <span>
          <FaIcon @icon={{if this.ukAccordionOpen "minus-circle" "plus-circle"}} />
        </span>
        {{if this.ukAccordionOpen "Hide" "Show"}} Menu
      </a>
      <div
        class="atlm-project-title uk-text-left uk-width-expand uk-padding-small
          {{if this.ukAccordionOpen "uk-animation-slide-left-small uk-animation-fast" "uk-animation-slide-right-small uk-animation-reverse uk-hidden"}}"
      >
        <div class="uk-card-header uk-padding-remove">
          <div class="uk-grid-small uk-flex-middle" uk-grid>
            <div class="uk-width-expand">
              <h1 class="uk-card-title uk-margin-remove-bottom">{{@project.name}}</h1>
                {{#if this.panelTitle}}
              <p class="uk-text-meta uk-margin-remove-top atlm-panel-title">
                  {{this.panelTitle}}
              </p>
                {{/if}}
            </div>
            {{!-- TODO: There has to be a better way than this conditional. --}}
            {{#if (and this.showToggle (contains "Map" (w this.panelTitle)))}}
              <MapUi::ToggleSwitch @project={{@project}} @status={{@project.allRastersHidden}} @type={{this.panelTitle}} />
            {{else if (and this.showToggle (contains "Data" (w this.panelTitle)))}}
              {{!-- New thing to set opacity of vector layers and remove leaflet objects. --}}
              <MapUi::VectorPanel::ToggleSwitch @project={{@project}} @status={{@project.allVectorsHidden}} />
            {{else if (and @project.unSaved (contains "Edit" (w this.panelTitle)))}}
              <div
                class="uk-text-center uk-grid-collapse uk-child-width-1-1 atlm-toggle"
                tabindex="0"
                role="button"
                uk-grid
                {{on "click" (perform @save)}}
              >
                <div class="atlm-toggle-switch">
                  <FaIcon @icon="save" />
                </div>
                <div class="atlm-toggle-status">
                  Save
                </div>
              </div>
            {{else}}
              <div></div>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
    <div class="uk-accordion-content atlm-project-panel uk-margin-remove-top" uk-grid>
      <div class="uk-width-auto@m">
        <ul class="atlm-map-ui-project-menu-options uk-tab-left" {{did-insert this.initUkTabs}}>
          <li class="uk-text-center uk-text-middle uk-padding-small uk-padding-remove-horizontal">
            <a href="#" class="uk-child-width-1-1 atlm-map-menu-button">
              <span>
                <FaIcon @icon="info" />
              </span>
              info
            </a>
          </li>
          {{#if @project.hasRasters}}
            <li class="uk-text-center uk-text-middle uk-padding-small uk-padding-remove-horizontal atlm-raster-menu-button">
              <a class="atlm-map-menu-button" href="#">
                <span>
                  <FaIcon @icon="map" />
                </span>
                maps
              </a>
            </li>
          {{/if}}
          {{#if @project.hasVectors}}
            <li class="uk-text-center uk-text-middle uk-padding-small uk-padding-remove-horizontal atlm-vector-menu-button">
              <a class="atlm-map-menu-button" href="#">
                <span>
                  <FaIcon @icon="database" />
                </span>
                data
              </a>
            </li>
          {{/if}}
          {{#if @project.mayEdit}}
            <li class="uk-text-center uk-text-middle uk-padding-small uk-padding-remove-horizontal">
              <a class="atlm-map-menu-button" href="#">
                <span>
                  <FaIcon @icon="edit" />
                </span>
                edit
              </a>
            </li>
          {{/if}}
        </ul>
      </div>
      <div class="uk-width-expand@m uk-panel uk-panel-scrollable">
        <ul id="component-tab-left" class="uk-switcher uk-text-left">
          <li>
            <article class="uk-card-body atlm-project-description">
              {{@project.description}}
            </article>
            {{#if @project.introModal}}
            <section class="uk-padding uk-padding-remove-top">
              <UkButton @color="secondary" @size="small" uk-toggle target={{concat "#modal-" @project.id}}>Show Project Introduction</UkButton>
            </section>
            {{/if}}
          </li>
          {{#if @project.hasRasters}}
            <li data-panel-title="Map Layers" data-type="panel">
              <MapUi::RasterPanel @project={{@project}} />
            </li>
          {{/if}}
          {{#if @project.hasVectors}}
            <li data-panel-title="Data Layers" data-type="panel">
              <MapUi::VectorPanel @project={{@project}} />
            </li>
          {{/if}}
          {{#if @project.mayEdit}}
            <li data-panel-title="Edit" data-type="panel">
              <MapUi::EditPanel @project={{@project}} />
            </li>
          {{/if}}
        </ul>
      </div>
    </div>
  </li>
</ul>
{{else}}
<nav class="atlm-mobile-project-menu uk-child-width-1-1 uk-grid-small uk-margin-remove-left {{if this.hideMenuPanel "panel-collapsed"}}" uk-grid>
  <div class="uk-text-center atlm-mobile-project-panel-close" role="button" {{on "click" (toggle "hideMenuPanel" this)}}><FaIcon @icon="chevron-down" /> Open</div>
  <ul class="uk-subnav uk-subnav-pill atlm-mobile-project-menu-buttons uk-width-1-1 uk-margin-remove-left" uk-switcher>
      <li><a href="#">Item</a></li>
      <li><a href="#">Item</a></li>
      <li><a href="#">Item</a></li>
  </ul>

  <ul class="uk-switcher uk-margin atlm-mobile-project-panels">
      <li>
        <section>
          {{@project.description}}
        </section>
      </li>
      <li>
        <div class="uk-position-relative uk-visible-toggle uk-light" tabindex="-1" uk-slider>
          <ul class="uk-slider-items uk-child-width-1-1 uk-child-width-1-3 uk-grid-small" uk-grid>
              {{#each @project.sortedRasters as |raster|}}
            <li>
                <img src={{raster.rasterLayer.thumb.url}} class="" alt="map preview">
                {{!-- <div class="uk-position-center uk-panel">{{raster.rasterLayer.title}}</div> --}}
            </li>
              {{/each}}
          </ul>
          <a class="uk-position-center-left uk-position-small uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
          <a class="uk-position-center-right uk-position-small uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
        </div>
      </li>
      <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur, sed do eiusmod.</li>
  </ul>
</nav>
{{/if}}